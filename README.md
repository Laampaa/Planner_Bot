# PlannerBot ‚Äî –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –≤ Telegram-–∫–∞–Ω–∞–ª ‚è∞

PlannerBot –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–æ–º –∏–ª–∏ –≥–æ–ª–æ—Å–æ–º –≤ –ª–∏—á–Ω–æ–º —á–∞—Ç–µ —Å –±–æ—Ç–æ–º –∏ –ø—É–±–ª–∏–∫—É–µ—Ç –∏—Ö –≤ –≤–∞—à–µ–º Telegram-–∫–∞–Ω–∞–ª–µ –≤ –Ω—É–∂–Ω–æ–µ –≤—Ä–µ–º—è.

---

## üöÄ –ß—Ç–æ —É–º–µ–µ—Ç –±–æ—Ç

* –°–æ–∑–¥–∞–≤–∞—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –∏–∑ —Ç–µ–∫—Å—Ç–∞
  –ü—Ä–∏–º–µ—Ä—ã:
  ¬´–∫—É–ø–∏—Ç—å –ø—Ä–æ–¥—É–∫—Ç—ã –∑–∞–≤—Ç—Ä–∞ —É—Ç—Ä–æ–º¬ª,
  ¬´–≤ 11:45 —Å–æ–∑–≤–æ–Ω¬ª,
  ¬´21.12.2025 –≤ 14:48 –≤—Å—Ç—Ä–µ—á–∞¬ª
* –ü—Ä–∏–Ω–∏–º–∞—Ç—å –≥–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞—Ç—å –∏—Ö —á–µ—Ä–µ–∑ OpenAI (Whisper)
* –ü–∞—Ä—Å–∏—Ç—å –∑–∞–¥–∞—á—É –∏ –≤—Ä–µ–º—è –∏–∑ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —è–∑—ã–∫–∞
* –ó–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
* –°–æ—Ö—Ä–∞–Ω—è—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –≤ SQLite
* –ü—É–±–ª–∏–∫–æ–≤–∞—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –≤ Telegram-–∫–∞–Ω–∞–ª
* –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö

–ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ä–µ–∂–∏–º–µ **polling** ‚Äî –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω **—Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —ç–∫–∑–µ–º–ø–ª—è—Ä** —Å –æ–¥–Ω–∏–º Telegram-—Ç–æ–∫–µ–Ω–æ–º.

---

## üß© –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
Planner_Bot/
‚îú‚îÄ‚îÄ main.py              # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –∏ –ª–æ–≥–∏–∫–∞ Telegram-–±–æ—Ç–∞
‚îú‚îÄ‚îÄ config.py            # –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ parser.py            # –ü–∞—Ä—Å–∏–Ω–≥ —Ç–µ–∫—Å—Ç–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –∏ –≤—Ä–µ–º–µ–Ω–∏
‚îú‚îÄ‚îÄ speech.py            # –û–±—Ä–∞–±–æ—Ç–∫–∞ –≥–æ–ª–æ—Å–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (Whisper)
‚îú‚îÄ‚îÄ utils.py             # –†–∞–±–æ—Ç–∞ —Å SQLite –∏ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
‚îú‚îÄ‚îÄ requirements.txt     # Python-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ Dockerfile           # Docker-–æ–±—Ä–∞–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ docker-compose.yml   # Docker Compose –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ .env.example         # –ü—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îî‚îÄ‚îÄ README.md            # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

–§–∞–π–ª –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö `reminders.db` —Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ.

---

## ‚öôÔ∏è –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env)

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` —Ä—è–¥–æ–º —Å `docker-compose.yml`.

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

```env
TELEGRAM_BOT_TOKEN=your_telegram_bot_token
OPENAI_API_KEY=your_openai_api_key
```

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

```env
CHANNEL_ID=-1001234567890
DB_PATH=/data/reminders.db
```

### –ü–æ—è—Å–Ω–µ–Ω–∏—è

* `TELEGRAM_BOT_TOKEN` ‚Äî —Ç–æ–∫–µ–Ω Telegram-–±–æ—Ç–∞ (BotFather)
* `OPENAI_API_KEY` ‚Äî –∫–ª—é—á OpenAI (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è Whisper –∏ –ø–∞—Ä—Å–∏–Ω–≥–∞ —Ç–µ–∫—Å—Ç–∞)
* `CHANNEL_ID` ‚Äî fallback-–∫–∞–Ω–∞–ª, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∫–∞–Ω–∞–ª –Ω–µ –±—ã–ª –ø–æ–¥–∫–ª—é—á—ë–Ω —á–µ—Ä–µ–∑ –±–æ—Ç–∞
* `DB_PATH` ‚Äî –ø—É—Ç—å –∫ SQLite –±–∞–∑–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `/data/reminders.db`)

### –ö–∞–∫ –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è –∫–∞–Ω–∞–ª

1. –í –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å –±–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `channel_id`, —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–π –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
2. –ï—Å–ª–∏ –∫–∞–Ω–∞–ª –Ω–µ –∑–∞–¥–∞–Ω –≤ –±–∞–∑–µ ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `CHANNEL_ID` –∏–∑ `.env`

–û–±—ã—á–Ω–æ `CHANNEL_ID` **–Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è**, —Ç–∞–∫ –∫–∞–∫ –∫–∞–Ω–∞–ª –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –±–æ—Ç–∞.

---

## üê≥ –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

* Docker
* Docker Compose plugin

### –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫

```bash
docker compose up -d --build
```

–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ —Ñ–æ–Ω–µ –∏ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è —Ç–µ—Ä–º–∏–Ω–∞–ª–∞.

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
docker compose logs -f
```

### –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

```bash
docker compose restart
```

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
docker compose down
```

---

## üíæ –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ SQLite.

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ —á–µ—Ä–µ–∑ Docker:

* –±–∞–∑–∞ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫–∞–∫ volume
* –¥–∞–Ω–Ω—ã–µ –Ω–µ —Ç–µ—Ä—è—é—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ –∏ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

‚ùå **–ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ**:

```bash
docker compose down -v
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ —É–¥–∞–ª–∏—Ç volume –∏ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö.

---

## üêç –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ –±–µ–∑ Docker

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

* Python **3.11+**
* –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π `ffmpeg` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –≥–æ–ª–æ—Å–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π)

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
```

### –°–æ–∑–¥–∞–Ω–∏–µ `.env`

```bash
cp .env.example .env
```

–ü—Ä–∏ –ª–æ–∫–∞–ª—å–Ω–æ–º –∑–∞–ø—É—Å–∫–µ –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –ø—É—Ç—å –∫ –±–∞–∑–µ:

```env
DB_PATH=./reminders.db
```

### –ó–∞–ø—É—Å–∫

```bash
python main.py
```

‚ö†Ô∏è –ù–µ–ª—å–∑—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—É—é –∏ –ø—Ä–æ–¥-–≤–µ—Ä—Å–∏—é –±–æ—Ç–∞ —Å –æ–¥–Ω–∏–º —Ç–æ–∫–µ–Ω–æ–º.

---

## üîó –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Telegram-–∫–∞–Ω–∞–ª–∞

–ë–æ—Ç—É –Ω—É–∂–Ω–æ –ø—Ä–∞–≤–æ –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –∫–∞–Ω–∞–ª–µ.

### –®–∞–≥–∏

1. –°–æ–∑–¥–∞–π—Ç–µ Telegram-–∫–∞–Ω–∞–ª
2. –î–æ–±–∞–≤—å—Ç–µ –±–æ—Ç–∞ –≤ –∫–∞–Ω–∞–ª
3. –ù–∞–∑–Ω–∞—á—å—Ç–µ –±–æ—Ç–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º
4. –†–∞–∑—Ä–µ—à–∏—Ç–µ –ø—É–±–ª–∏–∫–∞—Ü–∏—é —Å–æ–æ–±—â–µ–Ω–∏–π

### –°–ø–æ—Å–æ–±—ã –ø—Ä–∏–≤—è–∑–∫–∏ –∫–∞–Ω–∞–ª–∞

**–°–ø–æ—Å–æ–± 1 (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π)**
–ü–µ—Ä–µ—à–ª–∏—Ç–µ –±–æ—Ç—É –ª—é–±–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–∑ –Ω—É–∂–Ω–æ–≥–æ –∫–∞–Ω–∞–ª–∞ ‚Äî –±–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç `channel_id`.

**–°–ø–æ—Å–æ–± 2**
–í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É:

```text
/setchannel -1001234567890
```

–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞:

```text
/pingchannel
```

---

## ü§ñ –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

* `/start` ‚Äî —Å—Ç–∞—Ä—Ç –∏ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥
* `/setchannel <id>` ‚Äî –ø—Ä–∏–≤—è–∑–∞—Ç—å –∫–∞–Ω–∞–ª –≤—Ä—É—á–Ω—É—é
* `/pingchannel` ‚Äî –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∫–∞–Ω–∞–ª—É
* `/times` ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â–∏–µ –≤—Ä–µ–º–µ–Ω–∞ (—É—Ç—Ä–æ / –¥–µ–Ω—å / –≤–µ—á–µ—Ä / –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
* `/times 08:00 13:00 18:00 21:00` ‚Äî –∏–∑–º–µ–Ω–∏—Ç—å –≤—Ä–µ–º–µ–Ω–∞
* `/list` ‚Äî —Å–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
* `/delete <id>` ‚Äî —É–¥–∞–ª–∏—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ

---

## üîÅ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

### –õ–æ–∫–∞–ª—å–Ω–æ

```bash
git add .
git commit -m "Fix: description"
git push
```

### –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ

```bash
cd /opt/plannerbot/Planner_Bot
git pull
docker compose up -d --build
```

–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ —ç—Ç–æ–º —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è.

---

## ‚ö†Ô∏è –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### Conflict: terminated by other getUpdates request

–ó–∞–ø—É—â–µ–Ω—ã –¥–≤–µ –∫–æ–ø–∏–∏ –±–æ—Ç–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.
–û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –æ–¥–Ω—É –∏–∑ –Ω–∏—Ö.

### –ë–æ—Ç –Ω–µ –ø—É–±–ª–∏–∫—É–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –∫–∞–Ω–∞–ª

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:

* –±–æ—Ç —è–≤–ª—è–µ—Ç—Å—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º –∫–∞–Ω–∞–ª–∞
* —Ä–∞–∑—Ä–µ—à–µ–Ω–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π
* –∫–∞–Ω–∞–ª –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–æ–¥–∫–ª—é—á—ë–Ω (`/pingchannel`)

---
